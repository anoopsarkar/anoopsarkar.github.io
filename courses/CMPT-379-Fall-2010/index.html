<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>CMPT 379: Principles of Compiler Design</title>
  <link rel="stylesheet" href="course.css">
</head>
<body>
<h1>CMPT-379 - Fall 2010 - Principles of Compiler Design</h1>
<div class="sidebar">
<p><img alt="The Purple Dragon Book (textbook)"
 src="purpledragonbook.jpg"></p>
<h3><a href="#dates">Important Dates</a></h3>
<h3><a href="#assignments">Assignments</a></h3>
<h3><a href="#references">References</a></h3>
<h3><a href="#readings">Weekly Readings</a></h3>
<h3><a href="#readme">Course Policies</a> <small>(first time here?
read this)</small></h3>
</div>
<div class="main">
<ul>
  <li><span style="font-weight: bold;">Instructor</span>: <a
 href="http://www.cs.sfu.ca/%7Eanoop/">Dr. Anoop Sarkar</a> (anoop) </li>
    <li><span style="font-weight: bold;">Location and Time</span>: AQ 5037, Mon-Wed-Fri 2:30 - 3:20 PM</li>
  <br>
  <li><span style="font-weight: bold;">Mailing List</span>: cmpt-379 _at_ sfu.ca (always prefix "cmpt-379: " to all messages sent to this list)<br>
    <a href="http://www.cs.sfu.ca/CC/Hypermail/cmpt-379/">Mailing list archives</a></li>
  <br>
  <li><span style="font-weight: bold;">Office</span>: TASC1 9427</li>
  <li><span style="font-weight: bold;">Office hours</span>: Tue 10:30 AM - 12:00 PM</li>
  <br>
  <li><span style="font-weight: bold;">Teaching Assistant:</span> Baskaran Sankaran (bsa33) </li>
  <li><span style="font-weight: bold;">TA Office Hours:</span> TBA</li>
</ul>
<div class="blurb">
  
<p>This is a course for those who are interested in the design and practice of
programming languages.  If you want to learn how to design and implement
your own programming language, then take this course.  Every computing
device built today needs a compiler.  It enables us to use a high-level
programming language like C or Java by translating programs into low-level
machine code.  Understanding how compilers work is essential if you want to
be a good programmer.  The study of compilers also includes interesting
ideas in translation and optimization with sparse resources.  As part of
the course, the carefully designed assignments will allow students to
implement a working compiler using standard compiler tools.
</p>
  
</div>
<p>
More details: <a href="https://portal.cs.sfu.ca/outlines/view.html?subject=CMPT&number=379&section=D100&semester=1107">Course outline</a>
</p>
<div class="content">
<h2><a name="dates">Important Dates</a></h2>
<ul>
  <li>This page last updated on: <i>$Date: 2010-11-30 22:19:27 $</i>
  <li><span style="font-weight: bold;">Grading for the course:</span><br>
  </li>
  <ul>
    <li><span style="font-weight: bold;">Final Project:</span> 20%</li>
    <li><span style="font-weight: bold;">Two in-class quizzes (50 mins each):</span> 20% each = 40%<br>
    </li>
    <li><span style="font-weight: bold;">Homeworks:</span> 40%<br>
    </li>
  </ul>
  <li style="font-weight: bold;">Important Dates:</li>
  <ul>
    <li><span style="font-weight: bold;">Wed, Sep 8:</span> First day of class</li>
    <li><span style="font-weight: bold;">Oct 25:</span> Quiz #1</li>
    <li><span style="font-weight: bold;">Nov 24 (tentative):</span> Quiz #2</li>
    <li><span style="font-weight: bold;">Mon, Dec 6:</span> Last day of class</li>
    <li><span style="font-weight: bold;">Dec 15:</span> Final project due date</li>
  </ul>
</ul>
<h2><a name="assignments">Programming Assignments</a></h2>

<h4>Supporting files</h4>
<p>In order to complete some parts of your assignments, you will need to refer to the following files:</p>
<ul>
<li><a href="decafspec.pdf">Decaf language definition</a> (version of Mon 13 Sep 2010 11:17:33 PDT)</li>
<li><a href="../CMPT-379-Fall-2005/cod-appa.pdf">MIPS assembly and <code>spim</code> documentation</a></li>
<li><a href="http://www.cs.arizona.edu/classes/cs453/fall10/DOCS/3addr2spim.pdf">TAC to MIPS</a></li>
<li><span style="font-weight: bold;">Location of data files and software packages: </span><code>~anoop/cmpt379/</code> on the CSIL linux machines.</li>
</ul>
The MIPS virtual machine, spim is available in the directory ~anoop/cmpt379/spim-8.0/bin for the CSIL Linux machines. You can download <a href="http://pages.cs.wisc.edu/~larus/spim.html"><code>spim</code></a> but make sure you use version 8.0 you must make absolutely sure that your code runs on the CSIL Linux machines before you submit your homework code.
</p>

<h4>Homeworks and Final Project</h4>
<ul>
  <li><a href="hw1.pdf">Homework #1</a>. Sep 13 - Sep 29. 10% (<i>Q8 updated: 9/22</i>)</li>
  <li><a href="hw2.pdf">Homework #2</a>. Sep 30 - Oct 18. 10% </li>
  <li><a href="hw3.pdf">Homework #3</a>. Oct 25 - Nov 12. 10% </li>
  <li><a href="hw4.pdf">Homework #4</a>. Nov 12 - Nov 30. 10% (deadline extended to Fri, Dec 3)</li>
  <li><a href="finalprj.pdf">Final project</a>. Due Dec 15. 20% </li>
</ul>

<h4>Notes on assignment submission and development</h4> 

<p> You must use a <code>makefile</code> to compile your program, test and cleanup your program output. Running "make" should compile your program and running "make test" should run any tests on sample inputs. 
<ul>
  <li>Sample makefiles are provided to you with Homework #1.</li>
  <li>A gentle <a href="http://www.eng.hawaii.edu/Tutor/Make/index.html">make tutorial from U. Hawaii</a> (<a href="http://www.eng.hawaii.edu/Tutor/Make/FrenchMake/make.htm">en fran&ccedil;ais</a>).</li>
  <li>For hardcore hacking, refer to <code>info make</code>.</li>
  <li>Be careful when you use <a href="http://xkcd.com/149/">sudo with make</a>.
</ul> </p>

<p>Your homework
will be submitted electronically using the department-provided
submission server. Connect to the submission server by going to the
URL: <a href="https://submit.cs.sfu.ca/">https://submit.cs.sfu.ca/</a>
</p>

<p> <span style="font-style: italic;">It is expected that your
program will compile and run using the standard gcc or
g<small>++</small> compiler on the Linux CSIL lab machines.</span> If
you are developing on a Linux or Windows machine at home, you have to
ensure that the code will run on the CSIL machines before you submit
the assignment. Please either visit the CSIL lab machines or you can
use <code>ssh</code> to login to the CSIL Linux machines and also
use <code>scp</code> to copy over and test your programs on the CSIL
Linux machines before you submit them. Check
the <a href="http://www.cs.sfu.ca/CC/CSILPC/CSIL_Layout.pdf">CSIL Layout map</a>
for the machine names.
</p>

<p>In addition, we will be using <a href="http://flex.sourceforge.net/">flex</a> (preferably version 2.5.33) and <a href="http://www.gnu.org/software/bison/">bison</a> (preferably version 2.3) in order to build our compiler. </p> 

<p> Note that the C++ compiler for gcc version 2.96 and gcc version 3.3.2 are seriously broken and will not be compatible with gcc on the CSIL machines. Check the version you are using by running the command <code>gcc --version</code></p>

<p> For Windows machines, you might want to look into the use of the <a href="http://www.cygwin.com/"><span style="font-weight: bold;">cygwin</span> </a>environment and the <code>dos2unix</code> command on Linux. There will be no extensions for problems with non-CSIL machines.</p>

<p> On some CSIL Linux machines, in some rare cases, you might have to extend your CPU time limit for a process. If you are using tcsh then run the command "limit cputime 1800" to extend CPU time to 1800 secs or 30 mins. If you are using bash then use the command "ulimit -t 1800".  </p>

<h2><a name="references">Textbook and References</a></h2>
<ul>
  <li> <span style="font-family: serif; font-weight: bold;">Textbook:</span></li>
  <ul>
    <li>Compilers:  Principles, Techniques and Tools (2nd Edition), Alfred V. Aho,
     Monica S. Lam, Ravi Sethi, and Jeffrey D. Ullman, Addison-Wesley, 2006:  ISBN-13:
     978-0321486813 (the purple dragon book)</li>
  </ul>
  <li> <span style="font-family: serif; font-weight: bold;">Reference text:</span> (optional)</li>
  <ul>
    <li>lex &amp; yacc. 2nd Ed. John R. Levine, Tony Mason and Doug Brown. O'Reilly. ISBN 1-56592-000-7</li>
  </ul>
  <li><span style="font-weight: bold;">Reference Textbooks:</span>
Material that I use from time to time, but not required reading for
those taking the course.<br>
  </li>
  <ul>
    <li><span style="font-style: italic;">Modern Compiler
Implementation in {C,ML,Java}</span> by Andrew W. Appel. 2002,
Cambridge Univ Press.<br>
    </li>
    <li><span style="font-style: italic;">Theory of Parsing,
Translation and Compiling</span> (Vol 1: Parsing and Vol 2: Compiling)
by A. V. Aho and J. D. Ullman. 1972-1973, Prentice Hall.</li>
    <li><span style="font-style: italic;">Advanced Compiler
Design and Implementation</span> by Steven S. Muchnick. 1997, Morgan
Kaufmann.</li>
  </ul>
  <li><span style="font-weight: bold;">Course materials:</span>
From
Compilers courses taught at SFU and elsewhere. Typically I read <span
 style="font-style: italic;">and</span> use materials from these
courses for my lecture notes and for assignment ideas. I mention them
here to acknowledge their work.</li>
  <ul>
    <li><a href="../../../../../../fas-info/cs/CC/379/shermer/index.htm">CMPT
379</a>:
SFU<br>
    </li>
    <li><a href="http://www.stanford.edu/class/cs143/">CS 143</a>:
Stanford University<br>
    </li>
    <li><a href="http://web.mit.edu/course/6/6.035/6035.html">6.035</a>:
MIT</li>
    <li><a href="http://www.cis.udel.edu/%7Epollock/672/s03/">CISC
672</a>:
University of Delaware</li>
  </ul>
</ul>
<h2><a name="readings">Syllabus and Readings</a></h2>
<ol>
  <li>Introduction to Compiler Design<br>
  </li>
  <ul>
    <li>Chp 1</li>
    <li><a href="intro.pdf">Notes #1</a> (9/14)</li>
    <li>Code sample: <a href="duff-a.c">duff-a.c</a></li>
    <li>Links: <a href="http://www.acm.org/classics/sep95/">Reflections on Trusting Trust</a>, Ken Thompson. CACM 27(8), pp. 761-763, 1984.</li>
    <li>Code sample: <a href="dylib.ar"><tt>dylib.ar</tt></a>, dynamic linking in unix (to extract files, run <tt>ar -x dylib.ar</tt>)</li>
  </ul>
  <li>Lexical Analysis</li>
  <ul>
    <li>Chp 3</li>
    <li><a href="lex.pdf">Notes #2</a> (9/15)</li>
    <li>Code sample: <a href="adhocScanner.c">adhocScanner.c</a></li>
    <li>Code sample: <a href="simpletok.lex">simpletok.lex</a></li>
    <li>Code sample: <a href="cpptok.lex">cpptok.lex</a></li>
    <li>Links: <a href="../CMPT-379-Fall-2004/Fortran.html">Historical Perspective: FORTRAN I</a></li>
    <li>Links: <a href="http://swtch.com/~rsc/regexp/regexp1.html">Regular Expression Matching Can Be Simple And Fast</a> and <a href="http://swtch.com/~rsc/regexp/">Implementing Regular Expressions</a> by Russ Cox.</li>
    <li>Links: <a href="../CMPT-379-Fall-2004/posix-regexp.html">Posix "regular expression" specification</a></li>
    <li>Links: <a href="http://portal.acm.org/citation.cfm?id=359175&amp;coll=portal&amp;dl=ACM&amp;CFID=15540343&amp;CFTOKEN=40038079">Storing a sparse table</a>. R. E. Tarjan and A. C. Yao. CACM 22(11), 1979.</li>
  </ul>
  <li>Formal languages and automata, Analysis of Ambiguity</li>
  <ul>
    <li><a href="formal.pdf">Notes #3</a> (9/27)</li>
 </ul>
  <li>Syntax Analysis, Deterministic Parsing and sub-classes of
CFGs<br>
  </li>
  <ul>
    <li>Chp 4</li>
    <li><a href="cfg.pdf">Notes #4</a> (10/4)</li>
    <li><a href="LL.pdf">Notes #5</a> (10/18)</li>
    <li><a href="LR.pdf">Notes #6</a> (10/22)</li>
    <li><a href="cfparsing.pdf">Notes #7</a> (10/27)</li>
   <li>Links: <a href="http://www.aei.mpg.de/~peekas/tree/">tree.hh</a> -- STL style tree class implementation</li>
  </ul>
  <li>Simple Syntax-directed translations, Abstract Syntax Trees</li>
  <ul>
    <li>Chp 2, esp 2.5</li>
    <li><a href="abstract.pdf">Notes #8</a> (10/27)</li>
 </ul>
  <li>Syntax-directed Translation</li>
  <ul>
    <li><a href="sdt.pdf">Notes #9</a> (11/5)</li>
    <li>Chp 5</li>
 </ul>
  <li>Translation to Intermediate Code</li>
  <ul>
    <li><a href="tac.pdf">Notes #10</a> (11/5)</li>
    <li>Chp 6 (excluding Chp 6.3 to 6.5)</li>
 </ul>
  <li>Run-time Environment, Stack frames and parameter passing</li>
    <ul>
    <li><a href="runtime.pdf">Notes #11</a> (11/5)</li>
    <li><a href="http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/stack.html">MIPS stack</a>
    <li><a href="http://www.unc.edu/courses/2005spring/comp/120/001/handouts/L14-StacksProcedures.pdf">Stacks and procedures</a>
    <li>Chp 7, 7.1-7.4</li>
    </ul>
  <li>Code Generation and Register Allocation</li>
  <ul>
    <li><a href="codegen.pdf">Notes #12</a>
    <li>Chp 8</li>
 </ul>
 <li>Semantics: Semantic checks, Static and Dynamic Types</li>
   <ul>
     <li><a href="semantics.pdf">Notes #13</a>
     <li>Chp 6.3 to 6.5</li>
   </ul>
  <li>Code Optimization</li>
  <ul>
     <li><a href="optimize.pdf">Notes #14</a>
    <li>Chp 9, 9.1-9.6</li>
 </ul>
  <li>Wrap-up</li>
  <ul>
     <li><a href="conclusion.pdf">Notes #15</a>
 </ul>
</ol>
<h2><a name="readme">Course Expectations and Policies</a></h2>
<ul>
  <li>For personal advising come during my office hours (posted above).</li>
  <li>Email policy: 
    <ul>
      <li><span style="font-weight: bold;">Use the prefix "cmpt-379: " on all your messages</span>. If you do not include the prefix, then the mail might go unanswered. </li>
      <li>Send email to the course mailing list (cmpt-379@sfu.ca) rather than individually to me (the instructor). This will allow either me, the TA or other students to reply to your email.</li>
    </ul>
  </li>
 <li>Assignment submission details:
  <ul>
    <li>All assignments are due by 11:45 PM on the assignment due date.</li>
    <li>You must use the <a href="https://submit.cs.sfu.ca/">CS submission server</a> to submit your assignment.</li>
    <li>You have 4 grace days for the entire semester. You can use up your grace days, one per assignment, or all 4 for one assignment (in general, any integer partition of 4, which is <i>{ [1, 1, 1, 1], [1, 1, 2], [2, 2], [1, 3], [4] }</i> <a href="http://www.cs.sfu.ca/~anoop/distrib/partitions.py">source code</a>)</li>
    <li>You may choose to use a different algorithm than the one I suggest for solving any part of the assignment. However, please contact me before you do so. I would not recommend this for students who are not very confident about solving the assignment as given.</li>
    <li>Make sure your homework submission works on the CSIL Linux machines where we will be testing them. If we cannot compile your code, we cannot give you any marks for it.</li>
   <li>Each homework assignment will come with a makefile that contains the test cases. The output of your makefile when we run <code>make test</code> should match the provided stdout and stderr output files. Make sure your code produces the output file exactly. Use the unix 'diff' command to check if your output differs from the expected output. You may get zero marks if the diff command shows differences.</li>
    <li>Before you submit your code, make sure it compiles and produces the expected output on a CSIL Linux machine. You can even do this remotely by using ssh to connect to one of the CSIL Linux machines: (peach.csil.sfu.ca, mango.csil.sfu.ca, ... you get the idea).</li>
 </ul>
  </li>
 <li>Solving the assignments in a group:
  <ul>
    <li>Assignments can be discussed in a group with other students registered for this course. </li>
    <li>Each group can have at most three students.</li>
    <li>Discuss at any level: from high-level ideas to low-level implementations. But write your own solution. The solution within a single group can be similar. </li>
    <li>Membership in a group is not mandatory. If you wish to work alone, you can.</li>
    <li>Each student must email the instructor and the TA the names of the other students in the group before the due date of Homework #1.</li>
    <li>Each student is responsible for submission of the entire assignment by the due date using the submission server.</li>
    <li>You can leave a group mid-semester by emailing the instructor and the TA but you cannot join another group once you leave.</li>
    <li>The final project for the course <b>cannot</b> be done in a group. Each project is expected to be unique.</li>
    </ul>
  </li>
  <li>Programming language for the assignments:
  <ul>
    <li>Using C/C++ is strongly encouraged. The tools we will be using (lex/yacc or rather flex/bison) were intially developed for C/C++ and can be troublesome to use in other languages.</li>
    <li>Python v2.6.x, ocaml 3.11.x, and Java v1.6.x have the strongest support for lex/yacc outside of C/C++. So they may be used in exceptional circmstances (like, for instance, a physical revulsion to writing code in C++). Other languages like Go and Haskell have lex/yacc support but may not be a good fit for all the assignments. </li>
    <li>Despite my dissuasions above, if you do wish to use Python or Java then you must do so for <b>all</b> your assignments. The version used must be supported by CSIL on their Linux machines.</li>
    <li>If you want to use a language other than C/C++, please talk to me first.</li>
    <li>It might be a good idea to join a group that is using programming languages other than the one you are using.</li>
  </ul>
  </li>
  <li>Exams:
  <ul>
    <li> If you must miss an exam because of a medical problem, you should make an attempt to contact me prior to the exam either by email or a message in my mailbox. </li>
    <li>To request an extension of the due date due to a medical problem, you must submit the <a href="http://students.sfu.ca/forms/hcpsfGeneral.pdf">offical SFU Health Care Provider statement</a>. </li>
    <li>If you miss an exam due to valid medical reasons you will be graded on your performance on the rest of the course. </li>
    <li><span style="font-weight: bold;">Make up exams will not be given under any circumstances</span>. </li>
    </ul>
    </li>
    <li>Disclaimers about this web page:
    <ul>
      <li>All course information on this web page is tentative and could be in error. It can also change at any time. Confirm crucial dates or information with me in person during class. Double check with SFU calendar or schedule information for official class times and final exams time and location. </li>
      <li>Students are expected to attend all classes: announcements about assigned readings, homeworks and exams will be made available at the start of each class. Such announcements may not be made on this web page, so don't rely on information here instead of attending class. </li>
      <li>Lecture notes or other materials put up on this web page are only <span style="font-style: italic;">additional material</span> and <span style="font-weight: bold;">not</span> an alternative to the readings assigned. Only reading the lecture notes will not be enough to prepare for the assignments or the exams.</li>
    </ul>
  </li>
<li>Cheating:
  <ul>
    <li>In short, <b>don't</b>.</li>
    <li>Copying on assignments or exams will be taken very seriously. If you are caught cheating on an assignment or an exam you will be hauled off for disciplinary action. There will be no assignments to be solved as a group. Despite this, students often meet to discuss the assignments.  You have to be very careful that you do not take any notes or copy during these meetings. </li>
    <li>For more on academic dishonesty read the <a href="http://www.sfu.ca/policies/teaching/index.htm">University code of academic honesty</a>. </li>
    </ul>
  </li>
</ul>
</div>
<hr>
<address>anoop at cs.sfu.ca</address>
<p></p>
</div>
</body>
</html>
